<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Reset Password | Foundry Soccer Academy</title>
  <style>
    :root{ --bg:#0b0b0b; --card:#111; --soft:#1a1a1a; --accent:#f5c542; --text:#fff; --muted:#aeb4c2; --hdr:64px; }
    html,body{height:100%}
    body{
      margin:0; padding:0; background:var(--bg); color:var(--text);
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
      min-height:100%;
      display:flex; flex-direction:column; align-items:stretch; justify-content:flex-start;
      padding-top: calc(var(--hdr) + env(safe-area-inset-top));
    }
    /* Sticky brand header */
    .brand-bar{
      position:fixed; inset:0 0 auto 0; height:var(--hdr);
      display:flex; align-items:center; gap:.6rem;
      padding: calc(env(safe-area-inset-top) + 8px) 14px 8px;
      background:linear-gradient(180deg, rgba(0,0,0,.75), rgba(0,0,0,.35) 70%, rgba(0,0,0,0));
      backdrop-filter:saturate(120%) blur(6px);
      border-bottom:1px solid #1b1b1b;
      z-index:1000;
    }
    .brand-bar a.brand{ display:inline-flex; align-items:center; gap:.55rem; color:#fff; text-decoration:none; font-weight:700; letter-spacing:.2px; }
    .brand-bar img{ height:34px; width:auto; display:block; }
    .brand-bar .brand span{ color:#fff; font-size:1rem; }

    /* Content wrapper under header */
    .page-wrap{ width:100%; flex:1 0 auto; display:flex; align-items:center; justify-content:center; }

    .card{
      width:92%; max-width:420px; background:var(--card);
      padding:2rem; border-radius:16px; box-shadow:0 8px 28px rgba(0,0,0,.45);
      border:1px solid var(--soft); text-align:left;
      margin: 1.25rem auto 3rem;
    }
    h1{ margin:0 0 .25rem; font-size:1.6rem; color:var(--accent); text-align:center; }
    .sub{ margin:.25rem 0 1.25rem; color:var(--muted); text-align:center; font-size:.95rem; }

    label{ display:block; font-weight:600; color:#e6e6e6; font-size:.95rem; margin:.25rem 0 .35rem; }
    input[type="text"], input[type="password"], input:not([type]), input[type="email"]{
      width:100%; padding:.8rem .9rem; border-radius:10px; border:1px solid #2b2b2b;
      background:#000; color:var(--text); font-size:1rem; outline:none;
      transition:border-color .2s, box-shadow .2s;
    }
    input[type="text"]:focus, input[type="password"]:focus{
      border-color:#323232; box-shadow:0 0 0 3px rgba(245,197,66,.2);
    }

    button#resetBtn{
      width:100%; background:var(--accent); color:#000; font-weight:700; letter-spacing:.2px;
      border:0; padding:.9rem 1rem; border-radius:12px; cursor:pointer; font-size:1rem;
      transition:transform .04s ease, background .25s ease;
      margin-top:.25rem;
    }
    button#resetBtn:hover{ background:#e6b938; }
    button#resetBtn:active{ transform:translateY(1px); }

    .msg{ text-align:center; margin-top:1rem; color:var(--muted); min-height:1.2em; }
    .back{ text-align:center; margin-top:1rem; }
    .back a{ color:var(--accent); text-decoration:none; }
    .back a:hover{ text-decoration:underline; }

    /* Mobile tuning */
    @media (max-width: 480px){
      .brand-bar{ height:56px; }
      .card{ padding:1.25rem; margin:.75rem auto 2rem; }
      .card{ padding:1.5rem; }
      h1{ font-size:1.4rem; }
      input{ font-size:.98rem; }
    }
  </style>
</head>
<body>
  <header class="brand-bar">
    <a class="brand" href="/" aria-label="Foundry Soccer Academy home">
      <img src="/images/logo.png" alt="Foundry logo" />
      <span>Foundry Soccer Academy</span>
    </a>
  </header>

  <div class="page-wrap">
    <div class="card">
      <h1>Reset Password</h1>
      <input id="username" type="text" placeholder="Enter username" autocomplete="username" required>
      <input id="newPassword" type="password" placeholder="Enter new password">
      <button id="resetBtn">Reset Password</button>
      <p class="back"><a href="/login.html">Back to Login</a></p>
      <div class="msg" id="msg"></div>
    </div>
  </div>
  <script>
    document.getElementById('resetBtn').addEventListener('click', async () => {
      const username = document.getElementById('username').value.trim();
      const newPassword = document.getElementById('newPassword').value.trim();
      const msg = document.getElementById('msg');

      if (!username || !newPassword) {
        msg.textContent = 'Please fill out both fields.';
        return;
      }

      const res = await fetch('/api/reset-password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, newPassword })
      });
      const data = await res.json();
      if (data.ok) {
        msg.textContent = 'Password successfully reset!';
        setTimeout(() => location.href = '/login.html', 1200);
      } else {
        msg.textContent = data.error || 'Error resetting password.';
      }
    });
  </script>
</body>
</html>